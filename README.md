READ ME


WAVELET-BASED IMAGE COMPRESSION OF RADIOGRAPHIC IMAGES

This repository was developed as part of my Final Project for the Bachelor's Degree in Mathematics. It explores image compression techniques using wavelets, applied to CT scans.

The code is designed to process CT scans from the publicly available RadioLUNG dataset (https://github.com/RICMM/RadioLUNG). I do not claim ownership over the original medical data.

Due to GitHub’s file size limitations, the folder 'RadioLUNG/' containing the original `.nii` CT volumes is *not included* in this repository.  

The folder 'results/', generated by 'finding_db_level.py', which contained intermediate comparison plots, is also excluded due to file size.

---

FOLDER STRUCTURE:

- original cts/: Contains PNG slices extracted from the .nii files for easy visualisation. (Generated by convert_png.py)

- psnr_plots/: Stores individual PSNR curve plots for each image. (Generated by plots_psnr_ind.py)

- final compressed results/: Stores the final compressed PNG images and 'final_compressed_data.txt': a summary of PSNR values. (Generated by compressing_our_conf.py)

---

KEY DATA FILES AND PLOTS:

This repository includes some key generated data files and plots to facilitate understanding and reproducibility of the results:

- 'db_level_results.txt': Summary of PSNR values for different Daubechies wavelets and decomposition levels. (Generated by 'finding_db_level.py)

- psnr_retention_1.png, psnr_retention_3.png, psnr_retention_5.png, psnr_retention_10.png: Plots of PSNR values for different percentages of retained coefficients across wavelet configurations. (Generated by 'finding_db_level.py)

- 'psnr_lists.txt': PSNR values for various compression rates using the chosen configuration (db4, level-6 decomposition). (Generated by 'finding_cr.py') 

- 'spline_fit.png': Smoothed curve fitting average PSNR versus discarded coefficients. (Generated by 'finding_sewwtspot.py')

-'derivative.png': Plot of the derivative of PSNR with respect to discarded coefficients, used to identify the compression sweet spot. (Generated by 'finding_sewwtspot.py')

---

SCRIPTS OVERVIEW:

# 1 convert_png.py  
Purpose: Converts .nii files from RadioLUNG/ into PNG format for easy viewing.  

Input: All .nii files in RadioLUNG/  
Output: PNG images saved in original cts/  

# 2 finding_db_level.py  
Purpose: Tests various Daubechies wavelets (db2–db10) and decomposition levels to find the best configuration for image compression.  
- Compresses images using very aggressive thresholds (1%, 3%, 5%, 10% coefficients retained)  
- Calculates and stores the average PSNR for each configuration  
- Saves comparison plots in the results/ folder  

Input: Images from original cts/  
Output:  
- PSNR summary: db_level_results.txt  
- Comparison plots in results/  

Conclusion: Best configuration is db4 wavelet with 6 levels of decomposition.  

# 3 plots_db_level.py  
Purpose: Visualises the results from db_level_results.txt as plots for each retention level.  

Input: db_level_results.txt  
Output: 4 PNG plots: psnr_retention_*.png where * is 1, 3, 5 or 10, depending on the percentage of retained coefficients  

Conclusion: These plots help identify the wavelet–decomposition pair that performs best at low data retention: db4 wavelet with 6 levels of decomposition.  

# 4 finding_cr.py  
Purpose: Extracts the PSNR data for different compression rates using the chosen configuration (db4, level-6). Compresses each image from 1% to 99% discarded coefficients and stores individual PSNR values and overall averages for each percentage.  

Input: Images from original cts/  
Output:  
- PSNR data for all images and average: psnr_lists.txt  

# 5 plots_psnr_ind.py  
Purpose: Analyses the impact of compression rate using the chosen configuration (db4, level-6). From the data in psnr_lists.txt it generates individual PSNR plots in terms of the percentage of discarded coefficients.  

Input: psnr_lists.txt  
Output: Individual PSNR plots saved in psnr_plots/  

Conclusion: While all images are extracted from the same repository and with the same standardised imaging protocols, the PSNR behaviour varies depending on the percentage of discarded coefficients.  

# 6 finding_sweetspot.py  
Purpose: Identifies the "sweet spot": the discard percentage at which PSNR quality begins to degrade rapidly. Fits a spline to the average PSNR curve and finds the point of maximum curvature drop (minimum derivative). Visualises the fitted curve and derivative.  

Input: psnr_lists.txt  
Output:  
- spline_fit.png: PSNR vs discarded percentage  
- derivative.png: Derivative curve  
- Prints sweet spot percentage (27%)  

Conclusion: Discarding 27% of coefficients offers the best trade-off.  

# 7 compressing_our_conf.py  
Purpose: Compresses all CT images using the final configuration:  
- Wavelet: db4  
- Decomposition Level: 6  
- Discarded Coefficients: 27%  

Input: .nii files from RadioLUNG/  
Output:  
- Compressed PNGs saved in final compressed results/  
- PSNR values for each image saved in final_compressed_data.txt 

---

REPRODUCING RESULTS:


To generate files and plots
1. Download the RadioLUNG dataset and place '.nii' files in a 'RadioLUNG/' folder.
2. Run the following scripts in order:
   - 'convert_png.py'
   - 'finding_db_level.py'
   - 'plots_db_level.py'
   - 'finding_cr.py'
   - 'plots_psnr_ind.py'
   - 'finding_sweetspot.py'
   - 'compressing_our_conf.py'

---

This repository is for academic purposes only. All medical data belongs to the RadioLUNG project.

